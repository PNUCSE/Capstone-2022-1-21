<!DOCTYPE html>
<html lang="en">

<head>
<title>Our graduation project</title>

<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>  
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script title="text/javascript" src="jquery.js"></script>
<script title="text/javascript" src="custom.js"></script>
 <script title="text/javascript" src="script.js"></script>
  <script title="text/javascript" src="fastascript.js"></script>
  <script title="text/javascript" src="mummerscript.js"></script>


<meta charset="UTF-8">
<link href="style.css" rel="stylesheet">
<link href="stylee.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" />

</head>
<body>

  <div class="topnav">  <!-- main menu -->
    <a class="active" href="index.html">Home</a>
    <a id="goals" href="#">Project goals</a>
    <a id="tools" href="#">Main tools and techniques</a>
    <a id="experiments" href="#">Experiments</a>
    <a id="results" href="#">Results</a>
    <a id="members" href="#">Members</a>
    <a id="references" href="#">References</a>
  </div>
  <div class="one">
    <div class="container">
      <div class="menu">
            <button class="button_active">Fasta files</button>
            <button>PAF file</button>
            <button>Mummer file</button>
      </div>
          <div class="content">
            <div class="content_inside content_inside_active">
               

                <div class="cardddfasta">
                              <div class="cardbody">
                                  <div class='progress' id="progressDivId">
                                      <div class='progress-bar' id='progressFastaBar'></div>
                                      <div class='percent' id='percentFasta'>0%</div>
                                  </div>
                                  <div id='outputFastaImage'></div>
                                  <div id='fastaerror'></div>
                                  <form action="javascript:void(0)" id="uploadFastaForm" name="frmupload" method="post" enctype="multipart/form-data">
                                  <div class="form-group">
                                          <label><strong>Select FASTA files : </strong><span class="text-danger"> *</span></label>
                                          <input type="file" id="file1" name="file1" class="form-control">
                                          <br>
                                          <input type="file" id="file2" name="file2" class="form-control">
                                  </div>
                                      <br>
                                  <div class="d-flex">
                                          <input id="submitfastaButton" type="submit" name='btnSubmitfasta' value="Upload" onclick="displayUpload()">
                                  </div>
                                  </form>
                              </div>
                          </div>
                         

            </div>
            <div class="content_inside">
              
                 <div class="carddd">
                              <div class="cardbody">
                                  <div class='progress' id="progressDivId">
                                      <div class='progress-bar' id='progressBar'></div>
                                      <div class='percent' id='percent'>0%</div>
                                  </div>
                                  <div id='outputImage'></div>
                                  <div id='error'></div>
                                  <form action="javascript:void(0)" id="uploadForm" name="frmupload" method="post" enctype="multipart/form-data">
                                  <div class="form-group">
                                          <label><strong>Select PAF file : </strong><span class="text-danger"> *</span></label>
                                          <input type="file" id="uploadImage" name="uploadImage" class="form-control">
                                  </div>
                                      <br>
                                  <div class="d-flex">
                                          <input id="submitButton" type="submit" name='btnSubmit' value="Upload" onclick="displayUpload()">
                                  </div>
                                  </form>
                              </div>
                          </div>

            </div>
            <div class="content_inside">
                          <div class="cardddmummer">
                              <div class="cardbody">
                                  <div class='progress' id="progressDivId">
                                      <div class='progress-bar' id='progressMummerBar'></div>
                                      <div class='percent' id='percentMummer'>0%</div>
                                  </div>
                                  <div id='outputMummerImage'></div>
                                  <div id='errorMummer'></div>
                                  <form action="javascript:void(0)" id="uploadMummerForm" name="frmupload" method="post" enctype="multipart/form-data">
                                  <div class="form-group">
                                          <label><strong>Select mummer file : </strong><span class="text-danger"> *</span></label>
                                          <input type="file" id="mummerfile" name="mummerfile" class="form-control">
                                  </div>
                                      <br>
                                  <div class="d-flex">
                                          <input id="submitMummerButton" type="submit" name='btnSubmitMummer' value="Upload" onclick="displayUpload()">
                                  </div>
                                  </form>
                              </div>
                          </div>
         </div>
      </div>
      </div>  <!-- container -->


    <script>
    let button = document.querySelectorAll('.menu button');
    let content_inside = document.querySelectorAll('.content_inside');

    Array.from(button).forEach(function(buttonArray, i) {
    buttonArray.addEventListener('click', function() {

        Array.from(button).forEach(buttonAll => buttonAll.classList.remove('button_active'));
        
        Array.from(content_inside).forEach(content_insideAll => content_insideAll.classList.remove('content_inside_active'));
        
        button[i].classList.add('button_active'); 
        
        content_inside[i].classList.add('content_inside_active');  
      });
    });
</script>


    <div id="lower">
      <p>Graph</p>
      <input type = "button" id="showData" value="Show" onclick="displayShow()">

      
    
</div> <!-- lower -->
  </div> <!-- one -->
  <div class="two">
    <div class = "upload" id = "tobechanged">
       <div id="graph"></div>
       
    </div>
  </div> <!-- two -->
     
<div class="slide">
    <div class="toggle" id="toggle">Download</div>
      <h1>Download the dot-plot visualization</h1>
      <div class="contact-form">
          <div class="formats">
        <table>
            <thead>
                <tr>
                    <th colspan="2">The table header</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                  <td>PAF</td>
                  <td>
                    <!-- <a href="download.php?path=./PAFs/Nile_tilapia_cntg5_Nile_tilapia_cntg0.minimap2.paf" onclick="displayDownload()">Download</a> -->
                    <?php
                      include("database.php");
                      $db = $conn;
                      function fetch_data() {
                        global $db;
                        $query="SELECT * from aligns ORDER BY id DESC LIMIT 1";
                        $exec=mysqli_query($db, $query);
                        if(mysqli_num_rows($exec)>0) {
                          $row= mysqli_fetch_all($exec, MYSQLI_ASSOC);
                          return $row[0];  
                              
                        } else {
                          return $row=[];
                        }
                      }
                      $fetchData = fetch_data();
                      echo '<a href="download.php?path=./' . $fetchData['paf'] . '">Download</a>';
                    ?>
                  </td>
                </tr>
                <tr>
                  <td>HTML</td>
                  <td>
                    <!-- <a href="download.php?path=./dotplots/H_pyloriJ99_Eslice.fasta_H_pylori26695_Eslice.fasta.minimap2/H_pyloriJ99_Eslice.fasta_H_pylori26695_Eslice.fasta.minimap2.html" onclick="displayDownload()">Download</a> -->
                    <?php
                    echo '<a href="download.php?path=./' . $fetchData['result'] . '">Download</a>';
                    ?>
                  </td>
                </tr>
                <tr>
                  <td>PNG</td>
                  <td><!-- <a href="download.php?path=./dotplots/Nile_tilapia_cntg5_Nile_tilapia_cntg0.minimap2/Nile_tilapia_cntg5_Nile_tilapia_cntg0.minimap2.png">Download</a> -->
                    <?php
                    echo '<a href="download.php?path=./' . $fetchData['PNG'] . '">Download</a>';
                    ?>
                  </td>
                </tr>
                <tr>
                  <td>ZIP</td>
                  <td><!-- <a href="download.php?path=./dotplots/Nile_tilapia_cntg5_Nile_tilapia_cntg0.minimap2.zip">Download</a> -->
                    <?php
                    echo '<a href="download.php?path=./' . $fetchData['ZIP'] . '">Download</a>';
                    ?>
                  </td>
              </tr>
            </tbody>
        </table>
      </div>
      </div>
  </div>

  <div class="slidetwo">
    <div class="toggletwo" id="toggletwo">Show info</div>
      <h1>Info about the file</h1>
        <div class="content-two">
          <div id="similarity"></div>
          <div id="nucleo"></div>
        </div>  


  </div>

  <div class="slidethree">
    <div class="togglethree" id="togglethree">Process</div>
    <div class="content-two">
      <h1>Process</h1> 
          <h15 id="elem1"></h15><br>
          <h15 id="elem2"></h15><br>
          <h15 id="elem3"></h15><br>
          <h15 id="elem4"></h15><br>
          <h15 id="elem5"></h15><br>
          <h15 id="elem6"></h15><br>
          <h15 id="elem7"></h15><br>
        </div>
  </div>


</body>
<script>
    $(document).ready(function()
    {
      $('.toggle').click(function()
      {
        $('.slide').toggleClass('active')
        $('.toggle').toggleClass('active')
      })
    })
    $(document).on("click", function(event)
    {
      if(!$(event.target).closest(".slide").length)
      {
        $('.slide').removeClass('active')
        $('.toggle').removeClass('active')
      }
    })



    $(document).ready(function()
    {
      $('.toggletwo').click(function()
      {
        $('.slidetwo').toggleClass('active')
        $('.toggletwo').toggleClass('active')
      })
    })
    $(document).on("click", function(event)
    {
      if(!$(event.target).closest(".slidetwo").length)
      {
        $('.slidetwo').removeClass('active')
        $('.toggletwo').removeClass('active')
      }
    })
    

    $(document).ready(function()
    {
      $('.togglethree').click(function()
      {
        $('.slidethree').toggleClass('active')
        $('.togglethree').toggleClass('active')
      })
    })
    $(document).on("click", function(event)
    {
      if(!$(event.target).closest(".slidethree").length)
      {
        $('.slidethree').removeClass('active')
        $('.togglethree').removeClass('active')
      }
    })
  </script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
      <script>
         function displayUpload() {
            var today = new Date();
            var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
             var text; 
             var i;
             for (let i = 1; i < 8; i++) { 
                  if(document.getElementById("elem"+i).innerHTML == null || 
                     document.getElementById("elem"+i).innerHTML == ''){
                   text = ">>File is successfully uploaded   " + time;
                  document.getElementById("elem"+i).innerHTML = text;
                  break;
                 }
              }
          }


          function displayShow() {
            var today = new Date();
            var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
             var text; 
             var i;
             for (let i = 1; i < 8; i++) { 
                  if(document.getElementById("elem"+i).innerHTML == null || 
                     document.getElementById("elem"+i).innerHTML == ''){
                   text = ">>Dotplot is displayed  " + time;
                  document.getElementById("elem"+i).innerHTML = text;
                  break;
                 }
              }
          }



          function displayDownload() {
            var today = new Date();
            var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
             var text; 
             var i;
             for (let i = 1; i < 8; i++) { 
                  if(document.getElementById("elem"+i).innerHTML == null || 
                     document.getElementById("elem"+i).innerHTML == ''){
                   text = ">>Result is downloaded  " + time;
                  document.getElementById("elem"+i).innerHTML = text;
                  break;
                 }
              }
          }
</script>


<script src="main.js"></script>
</html>